var videoplayerlogger={ngs_event_url_default:'',m_videoSessionID:'',m_platform:'',setPlatform:function(platform){this.m_platform=platform},getUdid:function(){var default_udid="0000000000";var default_ver=1;var sig=$.cookie('udid');var ver=$.cookie('udid_ver');if(((sig!=undefined)&&(sig!=null)&&(sig)&&(sig!=""))&&((ver!=undefined)&&(ver!=null)&&(ver)&&(ver!="")&&(ver<=default_ver))){}else{try{var fp=new Fingerprint();sig=fp.get()+'';if(sig.length<10){sig=default_udid+sig;sig=sig.substr(sig.length-10)}$.cookie('udid',sig,{expires:36500,domian:document.domain,path:'/'});$.cookie('udid_ver',default_ver,{expires:36500,domian:document.domain,path:'/'})}catch(err){sig=default_udid}}return sig},createVideoSessionID:function(){var session_id=this.getUdid()+(new Date().getTime());return session_id},getViewThroughArray:function(stateMessage){var ret=['undefined','undefined','undefined'];if(stateMessage.indexOf('playerviewthrough')!=-1){var tmpArray=stateMessage.split("-");var tmpKey=tmpArray[0];var tmpVals=tmpArray[1];var tmpValArray=tmpVals.split(",");for(var i=0;i<3;i++){if(tmpValArray.length>i){ret[i]=tmpValArray[i]}}}return ret},ngs_prejson2json:function(predata){data=predata;data.json=JSON.stringify(data.prejson);return data},ngs_getPredataDefault:function(stateMessage){var view_throughArray=this.getViewThroughArray(stateMessage);if((view_throughArray[0]=='0%')||(this.m_videoSessionID=='')){this.m_videoSessionID=this.createVideoSessionID()}var session_id=this.m_videoSessionID;var video_id='';var video_title='';var video_category_id='';var video_category='';var view_through='';var view_through_sec='';var seconds='';var article_id='';var article_title='';var page_name=decodeURI(document.URL);var platform='web';if(this.m_platform!=''){platform=this.m_platform}var prejson={datetime:new Date().getTime(),session_id:session_id,video_id:video_id,video_title:video_title,video_category_id:video_category_id,video_category:video_category,view_through:view_through,view_through_sec:view_through_sec,seconds:seconds,article_id:article_id,article_title:article_title,page_name:page_name,platform:platform};var udid=this.getUdid();var event='video_view';var r=Math.random();var l_data;l_data={udid:udid,event:event,prejson:prejson,r:r};return l_data},ngs_generateDataFromLoggingData:function(stateMessage,ngs_loggingData){var data=this.ngs_getPredataDefault(stateMessage);var view_throughArray=this.getViewThroughArray(stateMessage);data.prejson.video_id=ngs_loggingData.ngs_video_id;data.prejson.video_title=ngs_loggingData.ngs_video_title;data.prejson.video_category_id=ngs_loggingData.ngs_catid;data.prejson.video_category=ngs_loggingData.ngs_cat_title;data.prejson.view_through=view_throughArray[0];data.prejson.view_through_sec=view_throughArray[1];data.prejson.seconds=view_throughArray[2];data.prejson.article_id=ngs_loggingData.ngs_art_id;data.prejson.article_title=ngs_loggingData.ngs_art_title;data=this.ngs_prejson2json(data);return data},ngs_ajaxGet:function(url,data){$.ajax({url:url,type:'GET',dataType:'jsonp',async:true,data:{udid:data.udid,event:data.event,json:data.json,r:data.r}})},ngs_logVideoViewThrough:function(stateMessage,ngs_loggingData){if((!ngs_loggingData)||(ngs_loggingData==null)){return}var l_url=this.ngs_event_url_default;if((ngs_loggingData.ngs_url)&&(ngs_loggingData.ngs_url!="")){l_url=ngs_loggingData.ngs_url}if(l_url==''){return}var data=this.ngs_generateDataFromLoggingData(stateMessage,ngs_loggingData);if(data.prejson.seconds!=null){this.ngs_ajaxGet(l_url,data)}return data},ga_getLogArrayVideoPlay:function(stateMessage,menuName,catName,articleTitle,issue,artid,vid){var val='';var view_throughArray=this.getViewThroughArray(stateMessage);val=view_throughArray[0];var l_trackEvent='_trackEvent';var l_categories='Video';var l_actions='';if(stateMessage.indexOf('playerviewthrough')!=-1){l_actions='View '+val}else if(stateMessage=='onStart'){l_actions='Default'}var l_labels='';{if(typeof(menuName)!=='undefined'){l_labels=menuName}else{l_labels='undefined'}if(typeof(catName)!=='undefined'){l_labels+='/'+catName}else{l_labels+='/undefined'}if(typeof(articleTitle)!=='undefined'){l_labels+='/'+articleTitle}else{l_labels+='/undefined'}if(typeof(issue)!=='undefined'){l_labels+='/'+issue}else{l_labels+='/undefined'}if(typeof(artid)!=='undefined'){l_labels+='/'+artid}else{l_labels+='/undefined'}if(typeof(vid)!=='undefined'){l_labels+='/'+vid}else{l_labels+='/undefined'}}var l_values='';if(stateMessage.indexOf('playerviewthrough')!=-1){l_values=val.split('%')[0]}else if(stateMessage=='onStart'){l_values='onStart'}var result={trackEvent:l_trackEvent,categories:l_categories,actions:l_actions,labels:l_labels};return result}}
